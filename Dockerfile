FROM ubuntu:latest

RUN apt update && apt install curl git gcc -y

COPY . /initialize/installed-package

RUN curl -LO https://github.com/neovim/neovim/releases/latest/download/nvim-linux64.tar.gz && \
  rm -rf /opt/nvim && \
  tar -C /opt -xzf nvim-linux64.tar.gz

ENV PATH="$PATH:/opt/nvim-linux64/bin"

RUN LAZYGIT_VERSION=$(curl -s "https://api.github.com/repos/jesseduffield/lazygit/releases/latest" | grep -Po '"tag_name": "v\K[^"]*') && \
  curl -Lo lazygit.tar.gz "https://github.com/jesseduffield/lazygit/releases/latest/download/lazygit_${LAZYGIT_VERSION}_Linux_x86_64.tar.gz" && \
  tar xf lazygit.tar.gz lazygit && \
  install lazygit /usr/local/bin


WORKDIR /initialize/installed-package
# RUN ./setup.sh docker

WORKDIR /root

ENTRYPOINT [ "/bin/bash" ] 
